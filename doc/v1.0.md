# 多路工业加工站（Multi-Path Industrial Processor）
**设计文档 v1.1（评审版）**

---

## 0. 设计总览图

> 本图为系统结构与交互层级的权威参考  
> 所有文字设计均以此图为准

![alt text](image.png)

---

## 1. 设计目标（Design Goals）

### 1.1 核心目标
- 提供一台高度集成的**工业级加工站**
- 整合多种原版加工器功能，减少摆放数量
- 使用**空间化多路输入**代替复杂 UI 选择
- 支持模块级升级，服务中后期规模化生产
- 保持玩法直觉，不破坏原版加工语义

### 1.2 非目标（v1 不做）
- 不做自动从箱子吸取物品
- 不做跨地图或远程管理
- 不引入动态模块解锁系统
- 不追求完全替代所有原版机器

---

## 2. 系统整体结构（System Overview）

系统由四个层级组成：

1. **加工核心（Processing Core）**
2. **多路输入通道（Modules / Input Ports）**
3. **统一产物出口（Unified Output）**
4. **交互终端（Management Terminal UI）**

> 玩家日常操作集中在「输入通道」  
> 管理、升级集中在「交互终端」

---

## 3. 加工核心（Processing Core）

### 3.1 功能定位
加工核心是整台设备的逻辑中枢，负责：

- 接收来自各输入通道的物品
- 按通道语义分配加工任务
- 管理模块并行状态
- 管理全局煤炭燃料
- 汇总所有产物到统一出口

### 3.2 交互原则
- 加工核心对玩家**不可见**
- 玩家不需要理解内部运作逻辑
- 所有行为通过：
  - 空间投放
  - 或交互终端完成

---

## 4. 多路输入通道（Modules）

### 4.1 设计原则
- 一条通道 = 一种明确的加工语义
- 通道在视觉与空间上清晰区分
- 投放位置即代表加工方式选择

> **空间位置 = 加工语义**

---

### 4.2 v1 固定模块列表
（根据设计图）

1. 奶 / 蛋类  
2. 酿酒  
3. 腌制  
4. 冶炼  
5. 羊毛 / 兔毛  
6. 制油原料  

> v1 中模块类型固定，不做解锁或替换

---

### 4.3 投放规则
- 玩家手持物品
- 站在对应通道交互点
- 执行投放

结果：
- ✔ 符合通道规则 → 开始加工
- ✖ 不符合 → 操作失败，物品不消耗

---

## 5. 容量与并行（Capacity & Parallelism）

### 5.1 容量定义（已冻结）
> **容量 = 并行处理的数量**

- 每个模块有独立并行数
- 表示可同时运行的加工任务数量
- 与 UI 中展示的格子数量无关

---

### 5.2 并行行为
- 并行未满：新物品立即开始加工
- 并行已满：新物品被拒绝（v1 默认）

> v1 不引入显式加工队列

---

## 6. 加工速度（Speed）

### 6.1 速度语义
- 每个模块拥有独立速度参数
- 速度影响单次加工所需时间

### 6.2 初始规则
- 未升级时速度 ≈ 原版对应加工器
- 升级后可强化（是否启用由平衡决定）

---

## 7. 煤炭系统（Fuel System）

### 7.1 煤炭定义
- 煤炭进入机器的**全局燃料池**
- 玩家可提前放入多个煤炭

### 7.2 使用范围
- **仅冶炼模块**消耗煤炭
- 其它模块完全不依赖燃料

### 7.3 消耗规则
- 每完成一个冶炼任务消耗固定煤炭
- 煤炭不足时：
  - 冶炼模块暂停
  - 其它模块不受影响

---

## 8. 统一产物出口（Unified Output）

### 8.1 设计原则
- 所有模块产物进入同一出口
- 玩家集中一次性收取

### 8.2 行为规则
- 相同产物自动堆叠
- 输出口满时可暂停产出或暂存（实现阶段决定）

---

## 9. 交互终端 UI（Management Terminal）

### 9.1 UI 定位
交互终端用于**管理与观察**，而非日常投放。

---

### 9.2 UI 顶部区域
- 当前整体状态
- 升级入口
- UI 模式切换（如状态 / 升级视图）

---

### 9.3 UI 主体：模块状态区
用于描述：
- 每个模块当前工作状态
- 并行占用情况
- 是否停工（如缺煤）

---

### 9.4 UI 右侧：模块配置区
每个模块独立显示：
- 速度
- 容量（并行数）
- 升级按钮

> 升级是**模块级**，互不影响

---

## 10. 升级系统（Upgrade System）

### 10.1 升级粒度
- 不存在整机等级
- 每个模块独立升级

### 10.2 可升级维度
- 并行数量（核心）
- 加工速度（可选）

### 10.3 升级限制
- 升级不改变机器体积
- 升级消耗材料（不在本设计中定义）

---

## 11. 已冻结设计决策汇总

| 项目 | 决策 |
|----|----|
| 模块类型 | 固定 |
| 同物多加工 | 空间通道决定 |
| 容量语义 | 并行 |
| 速度 | 模块独立 |
| 产物出口 | 统一 |
| 煤炭 | 全局燃料池 |
| UI | 管理终端 |
| 升级 | 模块级 |

---

## 12. 评审关注点

请重点评审以下内容：

1. 是否接受「容量 = 并行」作为长期核心语义  
2. UI 是否只用于管理与升级  
3. 并行满时拒绝输入是否合理  
4. 是否在 v1 启用速度升级  
5. 模块数量是否可控、不过载

---

## 13. 结论

本设计已形成：
- 明确的系统边界
- 稳定的交互模型
- 不臃肿的升级路径

一旦评审通过，将作为 **v1 实现阶段不可推翻的设计基线**。
